machine:
  network:
    interfaces:
    - deviceSelector:
        physical: true
      dhcp: true
      vip:
        ip: 192.168.100.140    # # `interfaces` is used to define the network interface configuration.

  kubelet:
    # 
    #  Metrics Server
    # 
    extraArgs:
      rotate-server-certificates: true


cluster:
  extraManifests:
    # 
    # Gateway APIs
    - https://github.com/kubernetes-sigs/gateway-api/releases/download/v1.3.0/standard-install.yaml

    
    # Metrics server
    - https://raw.githubusercontent.com/alex1989hu/kubelet-serving-cert-approver/main/deploy/standalone-install.yaml
    - https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
 
  allowSchedulingOnControlPlanes: true

  # 
  # Cilium
  # 
  network:
    cni:
      name: none
  proxy:
    disabled: true

# Pod Security

  # apiServer:
  #   admissionControl:
  #     - name: PodSecurity
  #       configuration:
  #         apiVersion: pod-security.admission.config.k8s.io/v1beta1
  #         kind: PodSecurityConfiguration
  #         defaults:
  #           enforce: baseline
  #           enforce-version: latest
  #           audit: restricted
  #           audit-version: latest
  #           warn: restricted
  #           warn-version: latest
  #         exemptions:
  #           namespaces:
  #             - kube-system
  #             - your-namespace
  #           usernames: []
  #           runtimeClasses: []